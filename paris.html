<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paris - OlmoEarth Ward Analysis</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            overflow: hidden;
        }
        
        #container {
            display: flex;
            height: 100vh;
        }
        
        #sidebar {
            width: 380px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(148, 163, 184, 0.1);
            padding: 24px;
            overflow-y: auto;
            box-shadow: 4px 0 24px rgba(0, 0, 0, 0.3);
        }
        
        #map {
            flex: 1;
            position: relative;
        }
        
        h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            color: #94a3b8;
            font-size: 14px;
            margin-bottom: 24px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
            border: 1px solid rgba(96, 165, 250, 0.2);
            border-radius: 12px;
            padding: 16px;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(96, 165, 250, 0.2);
        }
        
        .stat-label {
            font-size: 11px;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #60a5fa;
        }
        
        .control-section {
            margin-bottom: 24px;
        }
        
        .section-title {
            font-size: 13px;
            font-weight: 600;
            color: #cbd5e1;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .metric-selector {
            display: grid;
            gap: 6px;
        }
        
        .metric-btn {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.2);
            color: #cbd5e1;
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .metric-btn:hover {
            background: rgba(59, 130, 246, 0.2);
            border-color: #60a5fa;
            transform: translateX(4px);
        }
        
        .metric-btn.active {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            border-color: #60a5fa;
            color: white;
            font-weight: 600;
        }
        
        .legend {
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 16px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 12px;
        }
        
        .legend-color {
            width: 24px;
            height: 16px;
            border-radius: 4px;
            margin-right: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .layer-control {
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 16px;
        }
        
        .layer-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .layer-label {
            font-size: 13px;
            color: #cbd5e1;
        }
        
        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(148, 163, 184, 0.3);
            transition: 0.4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #3b82f6;
        }
        
        input:checked + .slider:before {
            transform: translateX(20px);
        }
        
        .opacity-control {
            margin-top: 8px;
        }
        
        .opacity-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(to right, rgba(96, 165, 250, 0.1), rgba(96, 165, 250, 0.4));
            outline: none;
            -webkit-appearance: none;
            transition: all 0.3s ease;
        }
        
        .opacity-slider:hover {
            background: linear-gradient(to right, rgba(96, 165, 250, 0.2), rgba(96, 165, 250, 0.5));
        }
        
        .opacity-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
            transition: all 0.2s ease;
        }
        
        .opacity-slider::-webkit-slider-thumb:hover {
            transform: scale(1.15);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.6);
        }
        
        .opacity-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
            transition: all 0.2s ease;
        }
        
        .opacity-slider::-moz-range-thumb:hover {
            transform: scale(1.15);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.6);
        }
        
        .info-box {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 16px;
            max-width: 320px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            display: none;
            z-index: 1000;
        }
        
        .info-box.visible {
            display: block;
        }
        
        .info-title {
            font-size: 16px;
            font-weight: 600;
            color: #60a5fa;
            margin-bottom: 12px;
        }
        
        .info-metric {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .info-label {
            color: #94a3b8;
        }
        
        .info-value {
            color: #e2e8f0;
            font-weight: 600;
        }
        
        .data-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            margin-top: 8px;
        }
        
        .status-complete {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .status-partial {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }
        
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(30, 41, 59, 0.5);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(96, 165, 250, 0.3);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(96, 165, 250, 0.5);
        }
        
        .leaflet-popup-content-wrapper {
            background: rgba(15, 23, 42, 0.95);
            color: #e2e8f0;
            border-radius: 8px;
        }
        
        .leaflet-popup-tip {
            background: rgba(15, 23, 42, 0.95);
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="sidebar">
            <h1>Paris</h1>
            <div class="subtitle">France ‚Ä¢ Ward Analysis</div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Wards</div>
                    <div class="stat-value">20</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">With Change</div>
                    <div class="stat-value">20</div>
                </div>
            </div>
            
            <div class="control-section">

            
                <div class="section-title">Analysis Metrics</div>

            
                <div class="metric-selector">

                    <button class="metric-btn" data-metric="vegetation_index">
                        üåø Vegetation Index
                    </button>

                    <button class="metric-btn" data-metric="urban_density">
                        üè¢ Urban Density
                    </button>

                    <button class="metric-btn" data-metric="feature_diversity">
                        üé® Feature Diversity
                    </button>

            
                </div>

            
            </div>


            
            <div class="control-section">

            
                <div class="section-title">Change Metrics</div>

            
                <div class="metric-selector">

                    <button class="metric-btn" data-metric="vegetation_change_percent">
                        üå≥ Vegetation Change (%)
                    </button>

                    <button class="metric-btn" data-metric="urban_density_change_percent">
                        üèôÔ∏è Urban Density Change (%)
                    </button>

                    <button class="metric-btn" data-metric="diversity_change_percent">
                        üìà Diversity Change (%)
                    </button>

            
                </div>

            
            </div>
            
            <div class="control-section">
                <div class="section-title">Layers</div>
                <div class="layer-control">
                    <div class="layer-item">
                        <span class="layer-label">OpenStreetMap Overlay</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="osm-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="layer-item">
                        <span class="layer-label">Satellite Imagery</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="satellite-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="layer-item">
                        <span class="layer-label">Ward Boundaries</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="boundaries-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="opacity-control">
                        <div class="layer-label" style="margin-bottom: 8px;">Layer Opacity</div>
                        <input type="range" min="0" max="100" value="70" class="opacity-slider" id="opacity-slider">
                    </div>
                </div>
            </div>
            
            <div class="control-section">
                <div class="section-title">Legend</div>
                <div class="legend" id="legend">
                    <!-- Dynamic legend will be inserted here -->
                </div>
            </div>
        </div>
        
        <div id="map"></div>
        <div id="info-box" class="info-box"></div>
    </div>
    
    <script>
        // Ward data
        const wardsData = {
        "type": "FeatureCollection",
        "features": [
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Bourse",
                                "cartodb_id": 2,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:36:18.682Z",
                                "analysis": {
                                        "ward_name": "Bourse",
                                        "ward_no": "2",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.32288628816604614,
                                        "urban_density": 0.23320730030536652,
                                        "change_intensity": 0.33730024099349976,
                                        "feature_diversity": 9.311050415039062,
                                        "spatial_heterogeneity": 291.3003234863281,
                                        "coverage_percent": 52.326530612244895,
                                        "pixel_count": 492288,
                                        "mean_embedding": 0.0011569123016670346,
                                        "std_embedding": 0.33730024099349976
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.3131059408187866,
                                        "urban_density": 0.22504881024360657,
                                        "change_intensity": 0.3278936743736267,
                                        "feature_diversity": 9.023224830627441,
                                        "spatial_heterogeneity": 280.0934143066406,
                                        "coverage_percent": 52.326530612244895,
                                        "pixel_count": 492288,
                                        "mean_embedding": 0.0011696582660079002,
                                        "std_embedding": 0.3278936743736267
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.009780347347259521,
                                        "vegetation_change_percent": -3.0290376846940994,
                                        "urban_density_change": -0.008158490061759949,
                                        "urban_density_change_percent": -3.4983853640417992,
                                        "diversity_change": -0.2878255844116211,
                                        "diversity_change_percent": -3.0912257111907557,
                                        "overall_change_magnitude": 1.2745964340865612e-05
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.339999,
                                                                48.87196
                                                        ],
                                                        [
                                                                2.34789,
                                                                48.870689
                                                        ],
                                                        [
                                                                2.35433,
                                                                48.869308
                                                        ],
                                                        [
                                                                2.350979,
                                                                48.863411
                                                        ],
                                                        [
                                                                2.330292,
                                                                48.868294
                                                        ],
                                                        [
                                                                2.328211,
                                                                48.86972
                                                        ],
                                                        [
                                                                2.328072,
                                                                48.869923
                                                        ],
                                                        [
                                                                2.339999,
                                                                48.87196
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Temple",
                                "cartodb_id": 3,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:36:24.060Z",
                                "analysis": {
                                        "ward_name": "Temple",
                                        "ward_no": "3",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3190058469772339,
                                        "urban_density": 0.230590358376503,
                                        "change_intensity": 0.3332671523094177,
                                        "feature_diversity": 9.243427276611328,
                                        "spatial_heterogeneity": 279.06781005859375,
                                        "coverage_percent": 60.40723981900452,
                                        "pixel_count": 615168,
                                        "mean_embedding": 0.0011932157212868333,
                                        "std_embedding": 0.3332671523094177
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.3139045238494873,
                                        "urban_density": 0.22536104917526245,
                                        "change_intensity": 0.32642823457717896,
                                        "feature_diversity": 8.879390716552734,
                                        "spatial_heterogeneity": 304.61737060546875,
                                        "coverage_percent": 60.40723981900452,
                                        "pixel_count": 615168,
                                        "mean_embedding": 0.0010706008179113269,
                                        "std_embedding": 0.32642823457717896
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.005101323127746582,
                                        "vegetation_change_percent": -1.5991315444793843,
                                        "urban_density_change": -0.0052293092012405396,
                                        "urban_density_change_percent": -2.2677917836886463,
                                        "diversity_change": -0.36403656005859375,
                                        "diversity_change_percent": -3.9383288164090016,
                                        "overall_change_magnitude": 0.0001226149033755064
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.36236,
                                                                48.867905
                                                        ],
                                                        [
                                                                2.364764,
                                                                48.866436
                                                        ],
                                                        [
                                                                2.366694,
                                                                48.86319
                                                        ],
                                                        [
                                                                2.368454,
                                                                48.85582
                                                        ],
                                                        [
                                                                2.364335,
                                                                48.856441
                                                        ],
                                                        [
                                                                2.361631,
                                                                48.857262
                                                        ],
                                                        [
                                                                2.358626,
                                                                48.858757
                                                        ],
                                                        [
                                                                2.356825,
                                                                48.860111
                                                        ],
                                                        [
                                                                2.353391,
                                                                48.861214
                                                        ],
                                                        [
                                                                2.350172,
                                                                48.862034
                                                        ],
                                                        [
                                                                2.354249,
                                                                48.869286
                                                        ],
                                                        [
                                                                2.36236,
                                                                48.867905
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Panth\u00e9on",
                                "cartodb_id": 5,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:36:34.699Z",
                                "analysis": {
                                        "ward_name": "Panth\u00e9on",
                                        "ward_no": "5",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3145347833633423,
                                        "urban_density": 0.2276555895805359,
                                        "change_intensity": 0.3306238055229187,
                                        "feature_diversity": 9.520425796508789,
                                        "spatial_heterogeneity": 235.6334228515625,
                                        "coverage_percent": 60.96938775510205,
                                        "pixel_count": 1284864,
                                        "mean_embedding": 0.0014021277893334627,
                                        "std_embedding": 0.3306238055229187
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.3098224401473999,
                                        "urban_density": 0.22413982450962067,
                                        "change_intensity": 0.3254311978816986,
                                        "feature_diversity": 9.274792671203613,
                                        "spatial_heterogeneity": 246.72584533691406,
                                        "coverage_percent": 60.96938775510205,
                                        "pixel_count": 1284864,
                                        "mean_embedding": 0.0013179992092773318,
                                        "std_embedding": 0.3254311978816986
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.004712343215942383,
                                        "vegetation_change_percent": -1.498194624312443,
                                        "urban_density_change": -0.003515765070915222,
                                        "urban_density_change_percent": -1.5443350533993712,
                                        "diversity_change": -0.24563312530517578,
                                        "diversity_change_percent": -2.580064490342977,
                                        "overall_change_magnitude": 8.412858005613089e-05
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.351799,
                                                                48.83675
                                                        ],
                                                        [
                                                                2.345489,
                                                                48.837601
                                                        ],
                                                        [
                                                                2.336462,
                                                                48.839622
                                                        ],
                                                        [
                                                                2.342576,
                                                                48.850258
                                                        ],
                                                        [
                                                                2.344199,
                                                                48.85376
                                                        ],
                                                        [
                                                                2.3445,
                                                                48.854038
                                                        ],
                                                        [
                                                                2.346859,
                                                                48.853298
                                                        ],
                                                        [
                                                                2.350169,
                                                                48.851997
                                                        ],
                                                        [
                                                                2.3548,
                                                                48.850788
                                                        ],
                                                        [
                                                                2.36098,
                                                                48.84861
                                                        ],
                                                        [
                                                                2.366,
                                                                48.844997
                                                        ],
                                                        [
                                                                2.36493,
                                                                48.844379
                                                        ],
                                                        [
                                                                2.361839,
                                                                48.84
                                                        ],
                                                        [
                                                                2.351799,
                                                                48.83675
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Luxembourg",
                                "cartodb_id": 6,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:36:40.774Z",
                                "analysis": {
                                        "ward_name": "Luxembourg",
                                        "ward_no": "6",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.31740814447402954,
                                        "urban_density": 0.2298979014158249,
                                        "change_intensity": 0.3342180550098419,
                                        "feature_diversity": 9.367834091186523,
                                        "spatial_heterogeneity": 226.69662475585938,
                                        "coverage_percent": 54.17112299465241,
                                        "pixel_count": 777984,
                                        "mean_embedding": 0.001473296550102532,
                                        "std_embedding": 0.3342180550098419
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.31187403202056885,
                                        "urban_density": 0.22532297670841217,
                                        "change_intensity": 0.32527410984039307,
                                        "feature_diversity": 9.128021240234375,
                                        "spatial_heterogeneity": 228.87530517578125,
                                        "coverage_percent": 54.17112299465241,
                                        "pixel_count": 777984,
                                        "mean_embedding": 0.0014201848534867167,
                                        "std_embedding": 0.32527410984039307
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.005534112453460693,
                                        "vegetation_change_percent": -1.7435319634381645,
                                        "urban_density_change": -0.00457492470741272,
                                        "urban_density_change_percent": -1.9899810651763554,
                                        "diversity_change": -0.23981285095214844,
                                        "diversity_change_percent": -2.559960484118415,
                                        "overall_change_magnitude": 5.311169661581516e-05
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.316469,
                                                                48.846851
                                                        ],
                                                        [
                                                                2.31904,
                                                                48.847851
                                                        ],
                                                        [
                                                                2.32412,
                                                                48.850311
                                                        ],
                                                        [
                                                                2.32704,
                                                                48.851608
                                                        ],
                                                        [
                                                                2.32866,
                                                                48.851952
                                                        ],
                                                        [
                                                                2.331599,
                                                                48.856339
                                                        ],
                                                        [
                                                                2.33386,
                                                                48.85918
                                                        ],
                                                        [
                                                                2.337499,
                                                                48.85849
                                                        ],
                                                        [
                                                                2.340592,
                                                                48.85675
                                                        ],
                                                        [
                                                                2.342512,
                                                                48.855247
                                                        ],
                                                        [
                                                                2.344465,
                                                                48.853992
                                                        ],
                                                        [
                                                                2.34425,
                                                                48.853767
                                                        ],
                                                        [
                                                                2.342639,
                                                                48.850349
                                                        ],
                                                        [
                                                                2.33652,
                                                                48.83963
                                                        ],
                                                        [
                                                                2.31999,
                                                                48.8451
                                                        ],
                                                        [
                                                                2.316469,
                                                                48.846851
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Palais-Bourbon",
                                "cartodb_id": 7,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:36:45.091Z",
                                "analysis": {
                                        "ward_name": "Palais-Bourbon",
                                        "ward_no": "7",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3206683099269867,
                                        "urban_density": 0.23255522549152374,
                                        "change_intensity": 0.33913859724998474,
                                        "feature_diversity": 9.615080833435059,
                                        "spatial_heterogeneity": 246.07473754882812,
                                        "coverage_percent": 33.71069182389937,
                                        "pixel_count": 205824,
                                        "mean_embedding": 0.0013771934900432825,
                                        "std_embedding": 0.33913859724998474
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.31332600116729736,
                                        "urban_density": 0.2270582765340805,
                                        "change_intensity": 0.330395370721817,
                                        "feature_diversity": 8.99906063079834,
                                        "spatial_heterogeneity": 261.3890075683594,
                                        "coverage_percent": 33.71069182389937,
                                        "pixel_count": 205824,
                                        "mean_embedding": 0.0012629986740648746,
                                        "std_embedding": 0.330395370721817
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.007342308759689331,
                                        "vegetation_change_percent": -2.2896895428678654,
                                        "urban_density_change": -0.005496948957443237,
                                        "urban_density_change_percent": -2.363717669996451,
                                        "diversity_change": -0.6160202026367188,
                                        "diversity_change_percent": -6.40681251991764,
                                        "overall_change_magnitude": 0.00011419481597840786
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.309531,
                                                                48.84581
                                                        ],
                                                        [
                                                                2.307342,
                                                                48.847153
                                                        ],
                                                        [
                                                                2.289877,
                                                                48.858192
                                                        ],
                                                        [
                                                                2.294769,
                                                                48.861862
                                                        ],
                                                        [
                                                                2.300219,
                                                                48.863499
                                                        ],
                                                        [
                                                                2.31833,
                                                                48.863838
                                                        ],
                                                        [
                                                                2.331462,
                                                                48.859676
                                                        ],
                                                        [
                                                                2.333844,
                                                                48.85918
                                                        ],
                                                        [
                                                                2.33159,
                                                                48.856258
                                                        ],
                                                        [
                                                                2.33041,
                                                                48.854424
                                                        ],
                                                        [
                                                                2.329295,
                                                                48.852673
                                                        ],
                                                        [
                                                                2.328479,
                                                                48.851826
                                                        ],
                                                        [
                                                                2.327106,
                                                                48.851601
                                                        ],
                                                        [
                                                                2.319274,
                                                                48.847801
                                                        ],
                                                        [
                                                                2.313651,
                                                                48.845909
                                                        ],
                                                        [
                                                                2.311355,
                                                                48.845215
                                                        ],
                                                        [
                                                                2.309531,
                                                                48.84581
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "\u00c9lys\u00e9e",
                                "cartodb_id": 8,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:36:51.084Z",
                                "analysis": {
                                        "ward_name": "\u00c9lys\u00e9e",
                                        "ward_no": "8",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3147479295730591,
                                        "urban_density": 0.23016993701457977,
                                        "change_intensity": 0.3405759334564209,
                                        "feature_diversity": 9.512699127197266,
                                        "spatial_heterogeneity": 256.08526611328125,
                                        "coverage_percent": 57.30994152046783,
                                        "pixel_count": 75264,
                                        "mean_embedding": 0.0013289317721500993,
                                        "std_embedding": 0.3405759334564209
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.299482524394989,
                                        "urban_density": 0.2191322296857834,
                                        "change_intensity": 0.3277229368686676,
                                        "feature_diversity": 9.305374145507812,
                                        "spatial_heterogeneity": 242.36627197265625,
                                        "coverage_percent": 57.30994152046783,
                                        "pixel_count": 75264,
                                        "mean_embedding": 0.001351180486381054,
                                        "std_embedding": 0.3277229368686676
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.015265405178070068,
                                        "vegetation_change_percent": -4.850041491544323,
                                        "urban_density_change": -0.011037707328796387,
                                        "urban_density_change_percent": -4.795460029211903,
                                        "diversity_change": -0.20732498168945312,
                                        "diversity_change_percent": -2.179454841546507,
                                        "overall_change_magnitude": 2.2248714230954647e-05
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.30155,
                                                                48.864601
                                                        ],
                                                        [
                                                                2.299869,
                                                                48.865131
                                                        ],
                                                        [
                                                                2.298799,
                                                                48.86869
                                                        ],
                                                        [
                                                                2.297299,
                                                                48.871151
                                                        ],
                                                        [
                                                                2.295539,
                                                                48.87326
                                                        ],
                                                        [
                                                                2.29457,
                                                                48.873192
                                                        ],
                                                        [
                                                                2.294029,
                                                                48.873669
                                                        ],
                                                        [
                                                                2.294399,
                                                                48.87429
                                                        ],
                                                        [
                                                                2.295409,
                                                                48.874317
                                                        ],
                                                        [
                                                                2.297769,
                                                                48.87775
                                                        ],
                                                        [
                                                                2.297639,
                                                                48.878029
                                                        ],
                                                        [
                                                                2.298049,
                                                                48.87846
                                                        ],
                                                        [
                                                                2.298799,
                                                                48.87825
                                                        ],
                                                        [
                                                                2.309009,
                                                                48.880459
                                                        ],
                                                        [
                                                                2.316609,
                                                                48.88134
                                                        ],
                                                        [
                                                                2.32721,
                                                                48.88345
                                                        ],
                                                        [
                                                                2.326849,
                                                                48.875908
                                                        ],
                                                        [
                                                                2.326611,
                                                                48.875404
                                                        ],
                                                        [
                                                                2.326976,
                                                                48.873825
                                                        ],
                                                        [
                                                                2.326869,
                                                                48.873329
                                                        ],
                                                        [
                                                                2.32629,
                                                                48.872597
                                                        ],
                                                        [
                                                                2.326505,
                                                                48.872471
                                                        ],
                                                        [
                                                                2.325819,
                                                                48.869534
                                                        ],
                                                        [
                                                                2.325152,
                                                                48.869392
                                                        ],
                                                        [
                                                                2.32526,
                                                                48.869019
                                                        ],
                                                        [
                                                                2.320769,
                                                                48.863098
                                                        ],
                                                        [
                                                                2.31828,
                                                                48.863811
                                                        ],
                                                        [
                                                                2.30167,
                                                                48.863522
                                                        ],
                                                        [
                                                                2.30155,
                                                                48.864601
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Op\u00e9ra",
                                "cartodb_id": 9,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:00.221Z",
                                "analysis": {
                                        "ward_name": "Op\u00e9ra",
                                        "ward_no": "9",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.31904491782188416,
                                        "urban_density": 0.23070746660232544,
                                        "change_intensity": 0.33590567111968994,
                                        "feature_diversity": 9.557806015014648,
                                        "spatial_heterogeneity": 279.4022521972656,
                                        "coverage_percent": 68.06201550387597,
                                        "pixel_count": 1011456,
                                        "mean_embedding": 0.0012012296356260777,
                                        "std_embedding": 0.33590567111968994
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.30741530656814575,
                                        "urban_density": 0.22194461524486542,
                                        "change_intensity": 0.3257417380809784,
                                        "feature_diversity": 9.236156463623047,
                                        "spatial_heterogeneity": 266.44268798828125,
                                        "coverage_percent": 68.06201550387597,
                                        "pixel_count": 1011456,
                                        "mean_embedding": 0.0012215584283694625,
                                        "std_embedding": 0.3257417380809784
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.011629611253738403,
                                        "vegetation_change_percent": -3.6451328963751,
                                        "urban_density_change": -0.008762851357460022,
                                        "urban_density_change_percent": -3.7982521703836767,
                                        "diversity_change": -0.32164955139160156,
                                        "diversity_change_percent": -3.365307382115859,
                                        "overall_change_magnitude": 2.0328792743384838e-05
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.339599,
                                                                48.882011
                                                        ],
                                                        [
                                                                2.34952,
                                                                48.883781
                                                        ],
                                                        [
                                                                2.34987,
                                                                48.880692
                                                        ],
                                                        [
                                                                2.349209,
                                                                48.87888
                                                        ],
                                                        [
                                                                2.349,
                                                                48.87722
                                                        ],
                                                        [
                                                                2.348139,
                                                                48.87566
                                                        ],
                                                        [
                                                                2.34785,
                                                                48.873871
                                                        ],
                                                        [
                                                                2.34789,
                                                                48.870689
                                                        ],
                                                        [
                                                                2.34004,
                                                                48.87196
                                                        ],
                                                        [
                                                                2.32579,
                                                                48.869572
                                                        ],
                                                        [
                                                                2.326519,
                                                                48.872471
                                                        ],
                                                        [
                                                                2.326309,
                                                                48.872589
                                                        ],
                                                        [
                                                                2.32688,
                                                                48.873341
                                                        ],
                                                        [
                                                                2.326979,
                                                                48.873779
                                                        ],
                                                        [
                                                                2.32663,
                                                                48.875439
                                                        ],
                                                        [
                                                                2.32682,
                                                                48.87595
                                                        ],
                                                        [
                                                                2.32717,
                                                                48.883419
                                                        ],
                                                        [
                                                                2.327929,
                                                                48.883621
                                                        ],
                                                        [
                                                                2.32948,
                                                                48.884651
                                                        ],
                                                        [
                                                                2.337406,
                                                                48.882271
                                                        ],
                                                        [
                                                                2.339599,
                                                                48.882011
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Enclos-St-Laurent",
                                "cartodb_id": 10,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:05.756Z",
                                "analysis": {
                                        "ward_name": "Enclos-St-Laurent",
                                        "ward_no": "10",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3183669447898865,
                                        "urban_density": 0.23015186190605164,
                                        "change_intensity": 0.3329015374183655,
                                        "feature_diversity": 9.343294143676758,
                                        "spatial_heterogeneity": 251.3630828857422,
                                        "coverage_percent": 72.14663643235072,
                                        "pixel_count": 1466112,
                                        "mean_embedding": 0.001323385164141655,
                                        "std_embedding": 0.3329015374183655
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.3113420009613037,
                                        "urban_density": 0.22424714267253876,
                                        "change_intensity": 0.32590001821517944,
                                        "feature_diversity": 9.25052547454834,
                                        "spatial_heterogeneity": 266.3912658691406,
                                        "coverage_percent": 72.14663643235072,
                                        "pixel_count": 1466112,
                                        "mean_embedding": 0.0012223884696140885,
                                        "std_embedding": 0.32590001821517944
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.007024943828582764,
                                        "vegetation_change_percent": -2.2065556564671107,
                                        "urban_density_change": -0.005904719233512878,
                                        "urban_density_change_percent": -2.565575261747478,
                                        "diversity_change": -0.09276866912841797,
                                        "diversity_change_percent": -0.9928903842891518,
                                        "overall_change_magnitude": 0.00010099669452756643
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.368755,
                                                                48.884079
                                                        ],
                                                        [
                                                                2.369142,
                                                                48.883289
                                                        ],
                                                        [
                                                                2.370213,
                                                                48.882637
                                                        ],
                                                        [
                                                                2.370257,
                                                                48.878632
                                                        ],
                                                        [
                                                                2.370814,
                                                                48.878124
                                                        ],
                                                        [
                                                                2.370601,
                                                                48.87756
                                                        ],
                                                        [
                                                                2.376952,
                                                                48.872108
                                                        ],
                                                        [
                                                                2.372917,
                                                                48.870644
                                                        ],
                                                        [
                                                                2.364205,
                                                                48.86779
                                                        ],
                                                        [
                                                                2.363477,
                                                                48.867226
                                                        ],
                                                        [
                                                                2.362404,
                                                                48.867905
                                                        ],
                                                        [
                                                                2.354293,
                                                                48.869286
                                                        ],
                                                        [
                                                                2.347941,
                                                                48.870728
                                                        ],
                                                        [
                                                                2.347812,
                                                                48.873943
                                                        ],
                                                        [
                                                                2.348155,
                                                                48.875751
                                                        ],
                                                        [
                                                                2.348971,
                                                                48.877277
                                                        ],
                                                        [
                                                                2.349272,
                                                                48.879223
                                                        ],
                                                        [
                                                                2.349873,
                                                                48.880692
                                                        ],
                                                        [
                                                                2.349486,
                                                                48.883797
                                                        ],
                                                        [
                                                                2.359227,
                                                                48.884472
                                                        ],
                                                        [
                                                                2.364806,
                                                                48.884361
                                                        ],
                                                        [
                                                                2.368755,
                                                                48.884079
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Popincourt",
                                "cartodb_id": 11,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:14.753Z",
                                "analysis": {
                                        "ward_name": "Popincourt",
                                        "ward_no": "11",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3184458017349243,
                                        "urban_density": 0.2297130674123764,
                                        "change_intensity": 0.33191925287246704,
                                        "feature_diversity": 9.542421340942383,
                                        "spatial_heterogeneity": 240.23204040527344,
                                        "coverage_percent": 53.18261633011413,
                                        "pixel_count": 1860864,
                                        "mean_embedding": 0.0013806610368192196,
                                        "std_embedding": 0.33191925287246704
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.3140310049057007,
                                        "urban_density": 0.22555895149707794,
                                        "change_intensity": 0.32589733600616455,
                                        "feature_diversity": 9.08188247680664,
                                        "spatial_heterogeneity": 262.95233154296875,
                                        "coverage_percent": 53.18261633011413,
                                        "pixel_count": 1860864,
                                        "mean_embedding": 0.0012383779976516962,
                                        "std_embedding": 0.32589733600616455
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.004414796829223633,
                                        "vegetation_change_percent": -1.3863573660482826,
                                        "urban_density_change": -0.004154115915298462,
                                        "urban_density_change_percent": -1.8083933848835314,
                                        "diversity_change": -0.4605388641357422,
                                        "diversity_change_percent": -4.826226464762881,
                                        "overall_change_magnitude": 0.00014228303916752338
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.383175,
                                                                48.867115
                                                        ],
                                                        [
                                                                2.383776,
                                                                48.86607
                                                        ],
                                                        [
                                                                2.387465,
                                                                48.862823
                                                        ],
                                                        [
                                                                2.389654,
                                                                48.858444
                                                        ],
                                                        [
                                                                2.39223,
                                                                48.857571
                                                        ],
                                                        [
                                                                2.394321,
                                                                48.856548
                                                        ],
                                                        [
                                                                2.398398,
                                                                48.85133
                                                        ],
                                                        [
                                                                2.399214,
                                                                48.848709
                                                        ],
                                                        [
                                                                2.399064,
                                                                48.848103
                                                        ],
                                                        [
                                                                2.395899,
                                                                48.848351
                                                        ],
                                                        [
                                                                2.384291,
                                                                48.85017
                                                        ],
                                                        [
                                                                2.379999,
                                                                48.850483
                                                        ],
                                                        [
                                                                2.371544,
                                                                48.852459
                                                        ],
                                                        [
                                                                2.370257,
                                                                48.853222
                                                        ],
                                                        [
                                                                2.369184,
                                                                48.853081
                                                        ],
                                                        [
                                                                2.366737,
                                                                48.86319
                                                        ],
                                                        [
                                                                2.36472,
                                                                48.866409
                                                        ],
                                                        [
                                                                2.363477,
                                                                48.867256
                                                        ],
                                                        [
                                                                2.364205,
                                                                48.86779
                                                        ],
                                                        [
                                                                2.376866,
                                                                48.872108
                                                        ],
                                                        [
                                                                2.383175,
                                                                48.867115
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Gobelins",
                                "cartodb_id": 13,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:25.726Z",
                                "analysis": {
                                        "ward_name": "Gobelins",
                                        "ward_no": "13",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.31598204374313354,
                                        "urban_density": 0.2282896339893341,
                                        "change_intensity": 0.330170214176178,
                                        "feature_diversity": 10.232959747314453,
                                        "spatial_heterogeneity": 203.5183868408203,
                                        "coverage_percent": 63.17340067340067,
                                        "pixel_count": 3458304,
                                        "mean_embedding": 0.0016213114140555263,
                                        "std_embedding": 0.330170214176178
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.30895066261291504,
                                        "urban_density": 0.22271431982517242,
                                        "change_intensity": 0.3210259675979614,
                                        "feature_diversity": 10.08191204071045,
                                        "spatial_heterogeneity": 213.99082946777344,
                                        "coverage_percent": 63.17340067340067,
                                        "pixel_count": 3458304,
                                        "mean_embedding": 0.0014991855714470148,
                                        "std_embedding": 0.3210259675979614
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.007031381130218506,
                                        "vegetation_change_percent": -2.225247057372165,
                                        "urban_density_change": -0.005575314164161682,
                                        "urban_density_change_percent": -2.442210829608744,
                                        "diversity_change": -0.1510477066040039,
                                        "diversity_change_percent": -1.4760901081785747,
                                        "overall_change_magnitude": 0.00012212584260851145
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.342039,
                                                                48.838322
                                                        ],
                                                        [
                                                                2.345431,
                                                                48.837605
                                                        ],
                                                        [
                                                                2.348927,
                                                                48.837067
                                                        ],
                                                        [
                                                                2.35189,
                                                                48.836731
                                                        ],
                                                        [
                                                                2.36193,
                                                                48.840031
                                                        ],
                                                        [
                                                                2.36493,
                                                                48.844379
                                                        ],
                                                        [
                                                                2.365959,
                                                                48.844997
                                                        ],
                                                        [
                                                                2.38856,
                                                                48.826481
                                                        ],
                                                        [
                                                                2.385269,
                                                                48.825298
                                                        ],
                                                        [
                                                                2.37881,
                                                                48.82148
                                                        ],
                                                        [
                                                                2.363339,
                                                                48.816132
                                                        ],
                                                        [
                                                                2.356799,
                                                                48.816441
                                                        ],
                                                        [
                                                                2.3544,
                                                                48.817501
                                                        ],
                                                        [
                                                                2.351669,
                                                                48.817989
                                                        ],
                                                        [
                                                                2.346839,
                                                                48.81641
                                                        ],
                                                        [
                                                                2.34405,
                                                                48.816441
                                                        ],
                                                        [
                                                                2.3441,
                                                                48.817631
                                                        ],
                                                        [
                                                                2.34459,
                                                                48.819382
                                                        ],
                                                        [
                                                                2.343939,
                                                                48.820278
                                                        ],
                                                        [
                                                                2.34242,
                                                                48.821461
                                                        ],
                                                        [
                                                                2.34146,
                                                                48.823658
                                                        ],
                                                        [
                                                                2.34165,
                                                                48.826408
                                                        ],
                                                        [
                                                                2.34131,
                                                                48.831429
                                                        ],
                                                        [
                                                                2.34111,
                                                                48.831947
                                                        ],
                                                        [
                                                                2.342039,
                                                                48.838322
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Observatoire",
                                "cartodb_id": 14,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:30.531Z",
                                "analysis": {
                                        "ward_name": "Observatoire",
                                        "ward_no": "14",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.31327545642852783,
                                        "urban_density": 0.22693873941898346,
                                        "change_intensity": 0.32910656929016113,
                                        "feature_diversity": 9.746761322021484,
                                        "spatial_heterogeneity": 192.26806640625,
                                        "coverage_percent": 62.33766233766234,
                                        "pixel_count": 1253376,
                                        "mean_embedding": 0.0017107068561017513,
                                        "std_embedding": 0.32910656929016113
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.30670228600502014,
                                        "urban_density": 0.22218845784664154,
                                        "change_intensity": 0.32157784700393677,
                                        "feature_diversity": 9.758735656738281,
                                        "spatial_heterogeneity": 202.24786376953125,
                                        "coverage_percent": 62.33766233766234,
                                        "pixel_count": 1253376,
                                        "mean_embedding": 0.0015890185022726655,
                                        "std_embedding": 0.32157784700393677
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.00657317042350769,
                                        "vegetation_change_percent": -2.098207915310252,
                                        "urban_density_change": -0.004750281572341919,
                                        "urban_density_change_percent": -2.0931999466039852,
                                        "diversity_change": 0.011974334716796875,
                                        "diversity_change_percent": 0.12285449823976392,
                                        "overall_change_magnitude": 0.00012168835382908583
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.301464,
                                                                48.825428
                                                        ],
                                                        [
                                                                2.321032,
                                                                48.841503
                                                        ],
                                                        [
                                                                2.321547,
                                                                48.840996
                                                        ],
                                                        [
                                                                2.324594,
                                                                48.843651
                                                        ],
                                                        [
                                                                2.336396,
                                                                48.839695
                                                        ],
                                                        [
                                                                2.342105,
                                                                48.838284
                                                        ],
                                                        [
                                                                2.341117,
                                                                48.831982
                                                        ],
                                                        [
                                                                2.341504,
                                                                48.828793
                                                        ],
                                                        [
                                                                2.341632,
                                                                48.8256
                                                        ],
                                                        [
                                                                2.341504,
                                                                48.823254
                                                        ],
                                                        [
                                                                2.34249,
                                                                48.821304
                                                        ],
                                                        [
                                                                2.344036,
                                                                48.820118
                                                        ],
                                                        [
                                                                2.344551,
                                                                48.819355
                                                        ],
                                                        [
                                                                2.344164,
                                                                48.817574
                                                        ],
                                                        [
                                                                2.344078,
                                                                48.816502
                                                        ],
                                                        [
                                                                2.33571,
                                                                48.816811
                                                        ],
                                                        [
                                                                2.332878,
                                                                48.818478
                                                        ],
                                                        [
                                                                2.301464,
                                                                48.825428
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Vaugirard",
                                "cartodb_id": 15,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:35.322Z",
                                "analysis": {
                                        "ward_name": "Vaugirard",
                                        "ward_no": "15",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.31681787967681885,
                                        "urban_density": 0.2286914587020874,
                                        "change_intensity": 0.3310103416442871,
                                        "feature_diversity": 10.247371673583984,
                                        "spatial_heterogeneity": 221.12672424316406,
                                        "coverage_percent": 50.97152751058099,
                                        "pixel_count": 4069632,
                                        "mean_embedding": 0.0014959259424358606,
                                        "std_embedding": 0.3310103416442871
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.31030505895614624,
                                        "urban_density": 0.22424861788749695,
                                        "change_intensity": 0.32421886920928955,
                                        "feature_diversity": 9.957526206970215,
                                        "spatial_heterogeneity": 229.4530792236328,
                                        "coverage_percent": 50.971514985731694,
                                        "pixel_count": 4069631,
                                        "mean_embedding": 0.0014120072592049837,
                                        "std_embedding": 0.32421886920928955
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.006512820720672607,
                                        "vegetation_change_percent": -2.0556986011383693,
                                        "urban_density_change": -0.004442840814590454,
                                        "urban_density_change_percent": -1.9427226708882337,
                                        "diversity_change": -0.28984546661376953,
                                        "diversity_change_percent": -2.828485936163932,
                                        "overall_change_magnitude": 8.391868323087692e-05
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.292365,
                                                                48.827492
                                                        ],
                                                        [
                                                                2.277001,
                                                                48.833763
                                                        ],
                                                        [
                                                                2.274255,
                                                                48.830429
                                                        ],
                                                        [
                                                                2.275027,
                                                                48.829807
                                                        ],
                                                        [
                                                                2.272797,
                                                                48.82896
                                                        ],
                                                        [
                                                                2.270564,
                                                                48.828114
                                                        ],
                                                        [
                                                                2.267818,
                                                                48.828171
                                                        ],
                                                        [
                                                                2.267303,
                                                                48.831108
                                                        ],
                                                        [
                                                                2.27065,
                                                                48.833591
                                                        ],
                                                        [
                                                                2.269191,
                                                                48.835342
                                                        ],
                                                        [
                                                                2.266188,
                                                                48.834724
                                                        ],
                                                        [
                                                                2.264127,
                                                                48.835175
                                                        ],
                                                        [
                                                                2.278204,
                                                                48.849014
                                                        ],
                                                        [
                                                                2.287644,
                                                                48.855679
                                                        ],
                                                        [
                                                                2.289963,
                                                                48.858276
                                                        ],
                                                        [
                                                                2.309274,
                                                                48.845852
                                                        ],
                                                        [
                                                                2.311335,
                                                                48.845287
                                                        ],
                                                        [
                                                                2.316483,
                                                                48.846813
                                                        ],
                                                        [
                                                                2.320003,
                                                                48.845173
                                                        ],
                                                        [
                                                                2.324552,
                                                                48.843594
                                                        ],
                                                        [
                                                                2.321633,
                                                                48.841049
                                                        ],
                                                        [
                                                                2.320948,
                                                                48.841618
                                                        ],
                                                        [
                                                                2.301464,
                                                                48.825512
                                                        ],
                                                        [
                                                                2.292365,
                                                                48.827492
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Passy",
                                "cartodb_id": 16,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:40.880Z",
                                "analysis": {
                                        "ward_name": "Passy",
                                        "ward_no": "16",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3122153580188751,
                                        "urban_density": 0.22647103667259216,
                                        "change_intensity": 0.33143505454063416,
                                        "feature_diversity": 10.19894790649414,
                                        "spatial_heterogeneity": 183.3484344482422,
                                        "coverage_percent": 58.18335208098988,
                                        "pixel_count": 7944960,
                                        "mean_embedding": 0.00180667859967798,
                                        "std_embedding": 0.33143505454063416
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.3066641688346863,
                                        "urban_density": 0.2233186960220337,
                                        "change_intensity": 0.3264898955821991,
                                        "feature_diversity": 9.834892272949219,
                                        "spatial_heterogeneity": 195.5843048095703,
                                        "coverage_percent": 58.18335208098988,
                                        "pixel_count": 7944960,
                                        "mean_embedding": 0.0016683051362633705,
                                        "std_embedding": 0.3264898955821991
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.005551189184188843,
                                        "vegetation_change_percent": -1.7780000379908418,
                                        "urban_density_change": -0.0031523406505584717,
                                        "urban_density_change_percent": -1.3919398687240487,
                                        "diversity_change": -0.3640556335449219,
                                        "diversity_change_percent": -3.5695410632807607,
                                        "overall_change_magnitude": 0.00013837346341460943
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.28007,
                                                                48.878292
                                                        ],
                                                        [
                                                                2.294939,
                                                                48.873859
                                                        ],
                                                        [
                                                                2.297387,
                                                                48.871193
                                                        ],
                                                        [
                                                                2.299039,
                                                                48.868427
                                                        ],
                                                        [
                                                                2.29991,
                                                                48.865269
                                                        ],
                                                        [
                                                                2.301571,
                                                                48.864574
                                                        ],
                                                        [
                                                                2.3018,
                                                                48.863361
                                                        ],
                                                        [
                                                                2.29408,
                                                                48.86166
                                                        ],
                                                        [
                                                                2.28893,
                                                                48.85759
                                                        ],
                                                        [
                                                                2.28601,
                                                                48.854321
                                                        ],
                                                        [
                                                                2.277429,
                                                                48.847988
                                                        ],
                                                        [
                                                                2.26404,
                                                                48.835121
                                                        ],
                                                        [
                                                                2.257859,
                                                                48.835678
                                                        ],
                                                        [
                                                                2.253909,
                                                                48.839298
                                                        ],
                                                        [
                                                                2.25477,
                                                                48.845398
                                                        ],
                                                        [
                                                                2.2503,
                                                                48.845509
                                                        ],
                                                        [
                                                                2.241719,
                                                                48.848328
                                                        ],
                                                        [
                                                                2.2273,
                                                                48.84856
                                                        ],
                                                        [
                                                                2.225929,
                                                                48.85545
                                                        ],
                                                        [
                                                                2.23159,
                                                                48.86652
                                                        ],
                                                        [
                                                                2.23932,
                                                                48.870468
                                                        ],
                                                        [
                                                                2.2467,
                                                                48.876339
                                                        ],
                                                        [
                                                                2.25511,
                                                                48.874199
                                                        ],
                                                        [
                                                                2.258199,
                                                                48.88052
                                                        ],
                                                        [
                                                                2.28007,
                                                                48.878292
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Batignolles-Monceau",
                                "cartodb_id": 17,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:46.239Z",
                                "analysis": {
                                        "ward_name": "Batignolles-Monceau",
                                        "ward_no": "17",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3094092607498169,
                                        "urban_density": 0.22830332815647125,
                                        "change_intensity": 0.33176466822624207,
                                        "feature_diversity": 9.118185043334961,
                                        "spatial_heterogeneity": 215.76519775390625,
                                        "coverage_percent": 27.192982456140353,
                                        "pixel_count": 142848,
                                        "mean_embedding": 0.0015366190345957875,
                                        "std_embedding": 0.33176466822624207
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.30631011724472046,
                                        "urban_density": 0.22480367124080658,
                                        "change_intensity": 0.3246614634990692,
                                        "feature_diversity": 8.918340682983398,
                                        "spatial_heterogeneity": 215.0353546142578,
                                        "coverage_percent": 27.192982456140353,
                                        "pixel_count": 142848,
                                        "mean_embedding": 0.0015088050859048963,
                                        "std_embedding": 0.3246614634990692
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.0030991435050964355,
                                        "vegetation_change_percent": -1.0016324325865447,
                                        "urban_density_change": -0.003499656915664673,
                                        "urban_density_change_percent": -1.5328978968130191,
                                        "diversity_change": -0.1998443603515625,
                                        "diversity_change_percent": -2.191712050169907,
                                        "overall_change_magnitude": 2.7813948690891266e-05
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.27999,
                                                                48.878361
                                                        ],
                                                        [
                                                                2.28325,
                                                                48.882771
                                                        ],
                                                        [
                                                                2.29185,
                                                                48.88842
                                                        ],
                                                        [
                                                                2.29768,
                                                                48.889648
                                                        ],
                                                        [
                                                                2.306185,
                                                                48.895111
                                                        ],
                                                        [
                                                                2.314081,
                                                                48.898159
                                                        ],
                                                        [
                                                                2.32188,
                                                                48.900612
                                                        ],
                                                        [
                                                                2.33013,
                                                                48.900799
                                                        ],
                                                        [
                                                                2.32562,
                                                                48.887589
                                                        ],
                                                        [
                                                                2.32721,
                                                                48.88345
                                                        ],
                                                        [
                                                                2.31691,
                                                                48.881302
                                                        ],
                                                        [
                                                                2.30867,
                                                                48.880402
                                                        ],
                                                        [
                                                                2.29807,
                                                                48.878151
                                                        ],
                                                        [
                                                                2.29502,
                                                                48.873909
                                                        ],
                                                        [
                                                                2.27999,
                                                                48.878361
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Butte-Montmartre",
                                "cartodb_id": 18,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:52.398Z",
                                "analysis": {
                                        "ward_name": "Butte-Montmartre",
                                        "ward_no": "18",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3135058879852295,
                                        "urban_density": 0.22735890746116638,
                                        "change_intensity": 0.3299943804740906,
                                        "feature_diversity": 9.418758392333984,
                                        "spatial_heterogeneity": 234.64300537109375,
                                        "coverage_percent": 70.84491978609626,
                                        "pixel_count": 2543616,
                                        "mean_embedding": 0.00140536786057055,
                                        "std_embedding": 0.3299943804740906
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.308874249458313,
                                        "urban_density": 0.2240084409713745,
                                        "change_intensity": 0.324461966753006,
                                        "feature_diversity": 9.811654090881348,
                                        "spatial_heterogeneity": 231.4629669189453,
                                        "coverage_percent": 70.84491978609626,
                                        "pixel_count": 2543616,
                                        "mean_embedding": 0.0014007878489792347,
                                        "std_embedding": 0.324461966753006
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.004631638526916504,
                                        "vegetation_change_percent": -1.4773689121700704,
                                        "urban_density_change": -0.00335046648979187,
                                        "urban_density_change_percent": -1.473646459338366,
                                        "diversity_change": 0.3928956985473633,
                                        "diversity_change_percent": 4.17141710384189,
                                        "overall_change_magnitude": 4.5800115913152695e-06
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.370379,
                                                                48.900719
                                                        ],
                                                        [
                                                                2.370379,
                                                                48.896709
                                                        ],
                                                        [
                                                                2.37184,
                                                                48.895359
                                                        ],
                                                        [
                                                                2.370289,
                                                                48.894459
                                                        ],
                                                        [
                                                                2.367081,
                                                                48.887592
                                                        ],
                                                        [
                                                                2.36663,
                                                                48.886604
                                                        ],
                                                        [
                                                                2.36472,
                                                                48.884411
                                                        ],
                                                        [
                                                                2.358789,
                                                                48.884411
                                                        ],
                                                        [
                                                                2.34952,
                                                                48.883678
                                                        ],
                                                        [
                                                                2.339739,
                                                                48.88187
                                                        ],
                                                        [
                                                                2.337254,
                                                                48.882286
                                                        ],
                                                        [
                                                                2.32953,
                                                                48.88443
                                                        ],
                                                        [
                                                                2.32792,
                                                                48.883526
                                                        ],
                                                        [
                                                                2.327192,
                                                                48.883415
                                                        ],
                                                        [
                                                                2.325603,
                                                                48.887619
                                                        ],
                                                        [
                                                                2.33021,
                                                                48.900829
                                                        ],
                                                        [
                                                                2.353209,
                                                                48.901279
                                                        ],
                                                        [
                                                                2.370379,
                                                                48.900719
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Buttes-Chaumont",
                                "cartodb_id": 19,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:58.058Z",
                                "analysis": {
                                        "ward_name": "Buttes-Chaumont",
                                        "ward_no": "19",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3127126097679138,
                                        "urban_density": 0.22622662782669067,
                                        "change_intensity": 0.3275562524795532,
                                        "feature_diversity": 9.457235336303711,
                                        "spatial_heterogeneity": 200.42535400390625,
                                        "coverage_percent": 57.67841011743451,
                                        "pixel_count": 2942208,
                                        "mean_embedding": 0.0016333054518327117,
                                        "std_embedding": 0.3275562524795532
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.3080799877643585,
                                        "urban_density": 0.2231965959072113,
                                        "change_intensity": 0.32190436124801636,
                                        "feature_diversity": 9.676816940307617,
                                        "spatial_heterogeneity": 208.6043701171875,
                                        "coverage_percent": 57.67841011743451,
                                        "pixel_count": 2942208,
                                        "mean_embedding": 0.0015421333955600858,
                                        "std_embedding": 0.32190436124801636
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.004632622003555298,
                                        "vegetation_change_percent": -1.4814311475937905,
                                        "urban_density_change": -0.00303003191947937,
                                        "urban_density_change_percent": -1.339378988489648,
                                        "diversity_change": 0.21958160400390625,
                                        "diversity_change_percent": 2.3218371563726787,
                                        "overall_change_magnitude": 9.117205627262592e-05
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.408749,
                                                                48.877857
                                                        ],
                                                        [
                                                                2.402309,
                                                                48.875999
                                                        ],
                                                        [
                                                                2.395255,
                                                                48.875259
                                                        ],
                                                        [
                                                                2.39021,
                                                                48.875549
                                                        ],
                                                        [
                                                                2.387719,
                                                                48.874531
                                                        ],
                                                        [
                                                                2.386519,
                                                                48.874649
                                                        ],
                                                        [
                                                                2.38472,
                                                                48.873859
                                                        ],
                                                        [
                                                                2.376819,
                                                                48.872219
                                                        ],
                                                        [
                                                                2.370379,
                                                                48.87809
                                                        ],
                                                        [
                                                                2.37021,
                                                                48.882771
                                                        ],
                                                        [
                                                                2.36892,
                                                                48.883339
                                                        ],
                                                        [
                                                                2.368669,
                                                                48.884132
                                                        ],
                                                        [
                                                                2.364742,
                                                                48.884403
                                                        ],
                                                        [
                                                                2.366781,
                                                                48.886688
                                                        ],
                                                        [
                                                                2.368348,
                                                                48.890202
                                                        ],
                                                        [
                                                                2.370289,
                                                                48.894508
                                                        ],
                                                        [
                                                                2.37175,
                                                                48.89547
                                                        ],
                                                        [
                                                                2.370279,
                                                                48.896648
                                                        ],
                                                        [
                                                                2.370379,
                                                                48.90078
                                                        ],
                                                        [
                                                                2.3769,
                                                                48.900269
                                                        ],
                                                        [
                                                                2.38849,
                                                                48.900661
                                                        ],
                                                        [
                                                                2.392009,
                                                                48.899818
                                                        ],
                                                        [
                                                                2.39381,
                                                                48.898239
                                                        ],
                                                        [
                                                                2.39725,
                                                                48.88588
                                                        ],
                                                        [
                                                                2.401879,
                                                                48.88176
                                                        ],
                                                        [
                                                                2.4066,
                                                                48.880119
                                                        ],
                                                        [
                                                                2.408749,
                                                                48.877857
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Louvre",
                                "cartodb_id": 1,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:36:13.177Z",
                                "analysis": {
                                        "ward_name": "Louvre",
                                        "ward_no": "1",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3197021484375,
                                        "urban_density": 0.2312551587820053,
                                        "change_intensity": 0.33494463562965393,
                                        "feature_diversity": 9.99429702758789,
                                        "spatial_heterogeneity": 240.6100311279297,
                                        "coverage_percent": 48.156899810964084,
                                        "pixel_count": 782592,
                                        "mean_embedding": 0.00139106425922364,
                                        "std_embedding": 0.33494463562965393
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.3134381175041199,
                                        "urban_density": 0.22674758732318878,
                                        "change_intensity": 0.32826071977615356,
                                        "feature_diversity": 9.638694763183594,
                                        "spatial_heterogeneity": 231.31387329101562,
                                        "coverage_percent": 48.156899810964084,
                                        "pixel_count": 782592,
                                        "mean_embedding": 0.0014181138249114156,
                                        "std_embedding": 0.32826071977615356
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.006264030933380127,
                                        "vegetation_change_percent": -1.9593333870274916,
                                        "urban_density_change": -0.004507571458816528,
                                        "urban_density_change_percent": -1.949176607586787,
                                        "diversity_change": -0.3556022644042969,
                                        "diversity_change_percent": -3.558051791163555,
                                        "overall_change_magnitude": 2.7049565687775612e-05
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.320769,
                                                                48.863037
                                                        ],
                                                        [
                                                                2.325229,
                                                                48.868938
                                                        ],
                                                        [
                                                                2.325149,
                                                                48.869419
                                                        ],
                                                        [
                                                                2.328018,
                                                                48.869949
                                                        ],
                                                        [
                                                                2.330302,
                                                                48.868286
                                                        ],
                                                        [
                                                                2.350944,
                                                                48.863407
                                                        ],
                                                        [
                                                                2.347351,
                                                                48.857124
                                                        ],
                                                        [
                                                                2.34691,
                                                                48.856972
                                                        ],
                                                        [
                                                                2.345966,
                                                                48.855373
                                                        ],
                                                        [
                                                                2.344529,
                                                                48.854012
                                                        ],
                                                        [
                                                                2.3424,
                                                                48.855247
                                                        ],
                                                        [
                                                                2.340469,
                                                                48.8568
                                                        ],
                                                        [
                                                                2.33725,
                                                                48.858467
                                                        ],
                                                        [
                                                                2.331459,
                                                                48.85968
                                                        ],
                                                        [
                                                                2.320769,
                                                                48.863037
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "H\u00f4tel-de-Ville",
                                "cartodb_id": 4,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:36:29.259Z",
                                "analysis": {
                                        "ward_name": "H\u00f4tel-de-Ville",
                                        "ward_no": "4",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.3187052011489868,
                                        "urban_density": 0.2307976484298706,
                                        "change_intensity": 0.3334280550479889,
                                        "feature_diversity": 9.671270370483398,
                                        "spatial_heterogeneity": 256.20782470703125,
                                        "coverage_percent": 50.9713228492137,
                                        "pixel_count": 846336,
                                        "mean_embedding": 0.0013003968633711338,
                                        "std_embedding": 0.3334280550479889
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.31262698769569397,
                                        "urban_density": 0.22619016468524933,
                                        "change_intensity": 0.32889434695243835,
                                        "feature_diversity": 9.480226516723633,
                                        "spatial_heterogeneity": 291.44732666015625,
                                        "coverage_percent": 50.9713228492137,
                                        "pixel_count": 846336,
                                        "mean_embedding": 0.0011274863500148058,
                                        "std_embedding": 0.32889434695243835
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.006078213453292847,
                                        "vegetation_change_percent": -1.9071585375387181,
                                        "urban_density_change": -0.004607483744621277,
                                        "urban_density_change_percent": -1.9963304548231962,
                                        "diversity_change": -0.19104385375976562,
                                        "diversity_change_percent": -1.975374965659415,
                                        "overall_change_magnitude": 0.000172910513356328
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.36465,
                                                                48.845989
                                                        ],
                                                        [
                                                                2.360899,
                                                                48.84864
                                                        ],
                                                        [
                                                                2.35467,
                                                                48.850849
                                                        ],
                                                        [
                                                                2.35013,
                                                                48.851978
                                                        ],
                                                        [
                                                                2.34695,
                                                                48.853298
                                                        ],
                                                        [
                                                                2.344551,
                                                                48.854027
                                                        ],
                                                        [
                                                                2.345966,
                                                                48.855396
                                                        ],
                                                        [
                                                                2.346986,
                                                                48.856964
                                                        ],
                                                        [
                                                                2.347329,
                                                                48.857147
                                                        ],
                                                        [
                                                                2.350169,
                                                                48.86203
                                                        ],
                                                        [
                                                                2.353299,
                                                                48.86124
                                                        ],
                                                        [
                                                                2.35678,
                                                                48.860161
                                                        ],
                                                        [
                                                                2.358579,
                                                                48.858749
                                                        ],
                                                        [
                                                                2.36167,
                                                                48.857258
                                                        ],
                                                        [
                                                                2.364329,
                                                                48.856407
                                                        ],
                                                        [
                                                                2.36836,
                                                                48.855869
                                                        ],
                                                        [
                                                                2.3692,
                                                                48.85281
                                                        ],
                                                        [
                                                                2.366299,
                                                                48.846958
                                                        ],
                                                        [
                                                                2.36465,
                                                                48.845989
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "Reuilly",
                                "cartodb_id": 12,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:37:20.571Z",
                                "analysis": {
                                        "ward_name": "Reuilly",
                                        "ward_no": "12",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.29641449451446533,
                                        "urban_density": 0.22213038802146912,
                                        "change_intensity": 0.33354562520980835,
                                        "feature_diversity": 8.393678665161133,
                                        "spatial_heterogeneity": 154.64450073242188,
                                        "coverage_percent": 14.805825242718445,
                                        "pixel_count": 93696,
                                        "mean_embedding": 0.002155854133889079,
                                        "std_embedding": 0.33354562520980835
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.29545658826828003,
                                        "urban_density": 0.22254975140094757,
                                        "change_intensity": 0.3309626281261444,
                                        "feature_diversity": 8.264461517333984,
                                        "spatial_heterogeneity": 178.19876098632812,
                                        "coverage_percent": 14.805825242718445,
                                        "pixel_count": 93696,
                                        "mean_embedding": 0.0018562666373327374,
                                        "std_embedding": 0.3309626281261444
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.0009579062461853027,
                                        "vegetation_change_percent": -0.32316444165605945,
                                        "urban_density_change": 0.0004193633794784546,
                                        "urban_density_change_percent": 0.18879153960597356,
                                        "diversity_change": -0.12921714782714844,
                                        "diversity_change_percent": -1.5394578823165834,
                                        "overall_change_magnitude": 0.00029958749655634165
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.414499,
                                                                48.846809
                                                        ],
                                                        [
                                                                2.41252,
                                                                48.836529
                                                        ],
                                                        [
                                                                2.409609,
                                                                48.83427
                                                        ],
                                                        [
                                                                2.41407,
                                                                48.833698
                                                        ],
                                                        [
                                                                2.42214,
                                                                48.83585
                                                        ],
                                                        [
                                                                2.420249,
                                                                48.840588
                                                        ],
                                                        [
                                                                2.419299,
                                                                48.84206
                                                        ],
                                                        [
                                                                2.419989,
                                                                48.84359
                                                        ],
                                                        [
                                                                2.42179,
                                                                48.844547
                                                        ],
                                                        [
                                                                2.42445,
                                                                48.841778
                                                        ],
                                                        [
                                                                2.438359,
                                                                48.840588
                                                        ],
                                                        [
                                                                2.43922,
                                                                48.844547
                                                        ],
                                                        [
                                                                2.44085,
                                                                48.84444
                                                        ],
                                                        [
                                                                2.44076,
                                                                48.845959
                                                        ],
                                                        [
                                                                2.4466,
                                                                48.845901
                                                        ],
                                                        [
                                                                2.44634,
                                                                48.84494
                                                        ],
                                                        [
                                                                2.455519,
                                                                48.844097
                                                        ],
                                                        [
                                                                2.46334,
                                                                48.842232
                                                        ],
                                                        [
                                                                2.46977,
                                                                48.836529
                                                        ],
                                                        [
                                                                2.46909,
                                                                48.834148
                                                        ],
                                                        [
                                                                2.465219,
                                                                48.831497
                                                        ],
                                                        [
                                                                2.46428,
                                                                48.827599
                                                        ],
                                                        [
                                                                2.466,
                                                                48.827259
                                                        ],
                                                        [
                                                                2.464789,
                                                                48.822968
                                                        ],
                                                        [
                                                                2.462559,
                                                                48.819458
                                                        ],
                                                        [
                                                                2.45887,
                                                                48.81715
                                                        ],
                                                        [
                                                                2.453889,
                                                                48.816978
                                                        ],
                                                        [
                                                                2.44857,
                                                                48.818157
                                                        ],
                                                        [
                                                                2.4375,
                                                                48.818439
                                                        ],
                                                        [
                                                                2.43733,
                                                                48.81963
                                                        ],
                                                        [
                                                                2.431919,
                                                                48.822628
                                                        ],
                                                        [
                                                                2.42763,
                                                                48.82415
                                                        ],
                                                        [
                                                                2.421959,
                                                                48.824211
                                                        ],
                                                        [
                                                                2.419729,
                                                                48.8241
                                                        ],
                                                        [
                                                                2.41733,
                                                                48.8246
                                                        ],
                                                        [
                                                                2.41107,
                                                                48.825001
                                                        ],
                                                        [
                                                                2.40669,
                                                                48.826981
                                                        ],
                                                        [
                                                                2.403509,
                                                                48.8293
                                                        ],
                                                        [
                                                                2.40111,
                                                                48.829689
                                                        ],
                                                        [
                                                                2.39562,
                                                                48.828049
                                                        ],
                                                        [
                                                                2.390719,
                                                                48.827198
                                                        ],
                                                        [
                                                                2.38858,
                                                                48.826469
                                                        ],
                                                        [
                                                                2.364539,
                                                                48.84613
                                                        ],
                                                        [
                                                                2.366429,
                                                                48.847031
                                                        ],
                                                        [
                                                                2.36918,
                                                                48.85313
                                                        ],
                                                        [
                                                                2.370379,
                                                                48.85313
                                                        ],
                                                        [
                                                                2.371544,
                                                                48.852417
                                                        ],
                                                        [
                                                                2.38017,
                                                                48.850368
                                                        ],
                                                        [
                                                                2.384459,
                                                                48.850079
                                                        ],
                                                        [
                                                                2.39596,
                                                                48.848328
                                                        ],
                                                        [
                                                                2.414499,
                                                                48.846809
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                },
                {
                        "type": "Feature",
                        "properties": {
                                "name": "M\u00e9nilmontant",
                                "cartodb_id": 20,
                                "created_at": "2013-02-26T07:07:16.384Z",
                                "updated_at": "2013-02-26T18:38:05.143Z",
                                "analysis": {
                                        "ward_name": "M\u00e9nilmontant",
                                        "ward_no": "20",
                                        "years_available": [
                                                "2019",
                                                "2024"
                                        ],
                                        "has_change_analysis": true,
                                        "has_2019": true,
                                        "has_2024": true
                                },
                                "metrics_2019": {
                                        "vegetation_index": 0.31304797530174255,
                                        "urban_density": 0.22640979290008545,
                                        "change_intensity": 0.3283580243587494,
                                        "feature_diversity": 9.45515251159668,
                                        "spatial_heterogeneity": 209.31765747070312,
                                        "coverage_percent": 59.683098591549296,
                                        "pixel_count": 2863872,
                                        "mean_embedding": 0.001567706698551774,
                                        "std_embedding": 0.3283580243587494
                                },
                                "metrics_2024": {
                                        "vegetation_index": 0.31069278717041016,
                                        "urban_density": 0.2243742048740387,
                                        "change_intensity": 0.32326123118400574,
                                        "feature_diversity": 9.747318267822266,
                                        "spatial_heterogeneity": 206.5491485595703,
                                        "coverage_percent": 59.683098591549296,
                                        "pixel_count": 2863872,
                                        "mean_embedding": 0.0015640571946278214,
                                        "std_embedding": 0.32326123118400574
                                },
                                "change_metrics": {
                                        "vegetation_change": -0.0023551881313323975,
                                        "vegetation_change_percent": -0.7523409563860826,
                                        "urban_density_change": -0.002035588026046753,
                                        "urban_density_change_percent": -0.8990724296740367,
                                        "diversity_change": 0.29216575622558594,
                                        "diversity_change_percent": 3.09001632567266,
                                        "overall_change_magnitude": 3.6495039239525795e-06
                                }
                        },
                        "geometry": {
                                "type": "MultiPolygon",
                                "coordinates": [
                                        [
                                                [
                                                        [
                                                                2.4133,
                                                                48.865269
                                                        ],
                                                        [
                                                                2.41414,
                                                                48.859051
                                                        ],
                                                        [
                                                                2.41398,
                                                                48.853809
                                                        ],
                                                        [
                                                                2.414675,
                                                                48.852573
                                                        ],
                                                        [
                                                                2.41527,
                                                                48.851028
                                                        ],
                                                        [
                                                                2.41441,
                                                                48.846802
                                                        ],
                                                        [
                                                                2.39904,
                                                                48.848099
                                                        ],
                                                        [
                                                                2.3993,
                                                                48.848789
                                                        ],
                                                        [
                                                                2.39835,
                                                                48.851261
                                                        ],
                                                        [
                                                                2.39441,
                                                                48.856522
                                                        ],
                                                        [
                                                                2.38965,
                                                                48.858471
                                                        ],
                                                        [
                                                                2.38737,
                                                                48.862961
                                                        ],
                                                        [
                                                                2.3835,
                                                                48.866169
                                                        ],
                                                        [
                                                                2.38319,
                                                                48.867142
                                                        ],
                                                        [
                                                                2.37682,
                                                                48.872231
                                                        ],
                                                        [
                                                                2.38497,
                                                                48.873959
                                                        ],
                                                        [
                                                                2.38651,
                                                                48.874691
                                                        ],
                                                        [
                                                                2.38789,
                                                                48.874531
                                                        ],
                                                        [
                                                                2.39037,
                                                                48.875542
                                                        ],
                                                        [
                                                                2.39529,
                                                                48.87521
                                                        ],
                                                        [
                                                                2.40221,
                                                                48.87595
                                                        ],
                                                        [
                                                                2.40858,
                                                                48.87785
                                                        ],
                                                        [
                                                                2.41097,
                                                                48.87431
                                                        ],
                                                        [
                                                                2.41338,
                                                                48.87109
                                                        ],
                                                        [
                                                                2.4133,
                                                                48.865269
                                                        ]
                                                ]
                                        ]
                                ]
                        }
                }
        ]
};
        
        // Relative breaks calculated from actual data
        const relativeBreaks = {
        "vegetation_change_percent": [
                -4.850041491544323,
                -2.238135554471305,
                -1.9978794726718427,
                -1.6857717958546523,
                -1.4591666029457127
        ],
        "urban_density_change_percent": [
                -4.795460029211903,
                -2.4668837160364907,
                -2.035078251535512,
                -1.8889909564863527,
                -1.4573051412155025
        ],
        "diversity_change_percent": [
                -6.40681251991764,
                -3.5603496455869963,
                -2.6794330686713588,
                -2.09782289119167,
                -0.7697414077833674
        ],
        "overall_change_magnitude": [
                3.6495039239525795e-06,
                2.1864729933440686e-05,
                7.159588858485223e-05,
                0.000106275943107903,
                0.00012576661538332703
        ],
        "vegetation_index": [
                0.29545658826828003,
                0.30669466257095335,
                0.30892009735107423,
                0.31095247268676757,
                0.3131499528884888
        ],
        "urban_density": [
                0.2191322296857834,
                0.22268140614032744,
                0.2240872710943222,
                0.22454599142074586,
                0.22540062963962554
        ],
        "feature_diversity": [
                8.264461517333984,
                9.018391990661621,
                9.244777870178222,
                9.543613815307618,
                9.769319343566895
        ]
};
        
        // Initialize map with scroll wheel zoom enabled
        const map = L.map('map', {
            scrollWheelZoom: true,
            zoomControl: true
        }).setView([48.8566, 2.3522], 11);
        
        // Base layers
        const darkLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap contributors &copy; CARTO',
            maxZoom: 19
        }).addTo(map);
        
        const osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors',
            maxZoom: 19,
            opacity: 0.5
        });
        
        const satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: '&copy; Esri',
            maxZoom: 19
        });
        
        let currentMetric = null;  // No default metric selected
        let wardLayer = null;
        let labelsLayer = null;
        let currentOpacity = 0.7;
        
        // Color scales with absolute breaks
        const colorScales = {
            'data_availability': {
                colors: ['#dc2626', '#fbbf24', '#22c55e'],
                breaks: [0, 1, 2],
                label: 'Data Availability',
                isDiscrete: true,
                labels: ['No Data', 'Partial (1 year)', 'Complete (2 years)']
            },
            'vegetation_change_percent': {
                colors: ['#dc2626', '#f59e0b', '#94a3b8', '#a3e635', '#22c55e'],
                breaks: [-5, -2, -0.5, 0.5, 2],
                label: 'Vegetation Change (%)'
            },
            'urban_density_change_percent': {
                colors: ['#22c55e', '#a3e635', '#94a3b8', '#f59e0b', '#dc2626'],
                breaks: [-5, -2, -0.5, 0.5, 2],
                label: 'Urban Density Change (%)'
            },
            'diversity_change_percent': {
                colors: ['#dc2626', '#f59e0b', '#94a3b8', '#a3e635', '#22c55e'],
                breaks: [-5, -2, -0.5, 0.5, 2],
                label: 'Diversity Change (%)'
            },
            'vegetation_index': {
                colors: ['#dc2626', '#f59e0b', '#fbbf24', '#a3e635', '#22c55e'],
                breaks: [0, 0.2, 0.4, 0.6, 0.8],
                label: 'Vegetation Index'
            },
            'urban_density': {
                colors: ['#22c55e', '#a3e635', '#fbbf24', '#f59e0b', '#dc2626'],
                breaks: [0, 0.2, 0.4, 0.6, 0.8],
                label: 'Urban Density'
            },
            'feature_diversity': {
                colors: ['#dc2626', '#f59e0b', '#fbbf24', '#a3e635', '#22c55e'],
                breaks: [0, 5, 8, 11, 14],
                label: 'Feature Diversity'
            }
        };

        
        function getColor(value, metric) {
            const scale = colorScales[metric];
            if (value === null || value === undefined) return '#475569';
            
            for (let i = scale.breaks.length - 1; i >= 0; i--) {
                if (value >= scale.breaks[i]) {
                    return scale.colors[i];
                }
            }
            return scale.colors[0];
        }
        
        function getMetricValue(properties, metric) {
            if (metric === 'data_availability') {
                const years = properties.analysis?.years_available || [];
                return years.length;
            }
            
            if (metric.endsWith('_change_percent') || metric === 'diversity_change_percent') {
                return properties.change_metrics?.[metric];
            }
            
            return properties.metrics_2024?.[metric];
        }
        
        function updateLegend() {
            // If no metric selected, show placeholder
            if (!currentMetric) {
                document.getElementById('legend').innerHTML = '<div style="color: #94a3b8; font-size: 12px; text-align: center; padding: 12px;">Select a metric to view legend</div>';
                return;
            }
            
            const scale = colorScales[currentMetric];
            let legendHtml = '';
            
            if (scale.isDiscrete) {
                legendHtml = scale.colors.map((color, i) => {
                    return `
                        <div class="legend-item">
                            <div class="legend-color" style="background: ${color}"></div>
                            <span>${scale.labels[i]}</span>
                        </div>
                    `;
                }).join('');
            } else {
                legendHtml = scale.colors.map((color, i) => {
                    const min = i === 0 ? '-‚àû' : scale.breaks[i].toFixed(2);
                    const max = i === scale.colors.length - 1 ? '+‚àû' : scale.breaks[i + 1].toFixed(2);
                    return `
                        <div class="legend-item">
                            <div class="legend-color" style="background: ${color}"></div>
                            <span>${min} to ${max}</span>
                        </div>
                    `;
                }).join('');
            }
            
            document.getElementById('legend').innerHTML = legendHtml;
        }
        
        function styleFeature(feature) {
            // If no metric selected, show neutral gray
            if (!currentMetric) {
                return {
                    fillColor: '#475569',
                    weight: 1,
                    opacity: 1,
                    color: '#1e293b',
                    fillOpacity: currentOpacity
                };
            }
            
            const value = getMetricValue(feature.properties, currentMetric);
            return {
                fillColor: getColor(value, currentMetric),
                weight: 1,
                opacity: 1,
                color: '#1e293b',
                fillOpacity: currentOpacity
            };
        }
        
        function highlightFeature(e) {
            const layer = e.target;
            layer.setStyle({
                weight: 3,
                color: '#60a5fa',
                fillOpacity: Math.min(currentOpacity + 0.2, 1)
            });
            layer.bringToFront();
            
            showInfo(layer.feature.properties);
        }
        
        function resetHighlight(e) {
            wardLayer.resetStyle(e.target);
            hideInfo();
        }
        
        function showInfo(properties) {
            const infoBox = document.getElementById('info-box');
            const analysis = properties.analysis;
            
            let html = `<div class="info-title">${analysis.ward_name}</div>`;
            html += `<div style="margin-bottom: 8px; font-size: 13px; color: #94a3b8;">WARD NO: <span style="color: #e2e8f0; font-weight: 600;">${analysis.ward_no}</span></div>`;
            
            if (currentMetric) {
                // Data availability status
                const dataStatus = analysis.years_available.length === 2 ? 'Complete' : 'Partial';
                const statusClass = analysis.years_available.length === 2 ? 'status-complete' : 'status-partial';
                html += `<div class="data-status ${statusClass}">${dataStatus}: ${analysis.years_available.join(', ')}</div>`;
                
                if (properties.metrics_2024) {
                    html += `
                        <div class="info-metric">
                            <span class="info-label">Vegetation Index:</span>
                            <span class="info-value">${properties.metrics_2024.vegetation_index.toFixed(4)}</span>
                        </div>
                        <div class="info-metric">
                            <span class="info-label">Urban Density:</span>
                            <span class="info-value">${properties.metrics_2024.urban_density.toFixed(4)}</span>
                        </div>
                        <div class="info-metric">
                            <span class="info-label">Feature Diversity:</span>
                            <span class="info-value">${properties.metrics_2024.feature_diversity.toFixed(2)}</span>
                        </div>
                        <div class="info-metric">
                            <span class="info-label">Pixels Analyzed:</span>
                            <span class="info-value">${properties.metrics_2024.pixel_count.toLocaleString()}</span>
                        </div>
                    `;
                }
                
                if (properties.change_metrics) {
                    html += `
                        <div class="info-metric">
                            <span class="info-label">Veg. Change:</span>
                            <span class="info-value">${properties.change_metrics.vegetation_change_percent >= 0 ? '+' : ''}${properties.change_metrics.vegetation_change_percent.toFixed(2)}%</span>
                        </div>
                        <div class="info-metric">
                            <span class="info-label">Urban Change:</span>
                            <span class="info-value">${properties.change_metrics.urban_density_change_percent >= 0 ? '+' : ''}${properties.change_metrics.urban_density_change_percent.toFixed(2)}%</span>
                        </div>
                        <div class="info-metric">
                            <span class="info-label">Diversity Change:</span>
                            <span class="info-value">${properties.change_metrics.diversity_change_percent >= 0 ? '+' : ''}${properties.change_metrics.diversity_change_percent.toFixed(2)}%</span>
                        </div>
                    `;
                }
            } else {
                // User wants Change Overview here when no metric is selected
                if (properties.change_metrics) {
                    html += `<div style="margin-top: 12px; margin-bottom: 8px; font-size: 12px; font-weight: 600; color: #94a3b8; text-transform: uppercase;">Change Overview (2019-2024)</div>`;
                    
                    const formatChange = (val, invert) => {
                        const num = parseFloat(val);
                        const direction = invert ? -num : num;
                        const color = direction > 0 ? '#22c55e' : (direction < 0 ? '#ef4444' : '#94a3b8');
                        const sign = num > 0 ? '+' : '';
                        return `<span style="color: ${color}; font-weight: 600;">${sign}${num.toFixed(1)}%</span>`;
                    };

                    html += `
                        <div class="info-metric">
                            <span class="info-label">Vegetation:</span>
                            <span class="info-value">${formatChange(properties.change_metrics.vegetation_change_percent, false)}</span>
                        </div>
                        <div class="info-metric">
                            <span class="info-label">Urban Density:</span>
                            <span class="info-value">${formatChange(properties.change_metrics.urban_density_change_percent, true)}</span>
                        </div>
                        <div class="info-metric">
                            <span class="info-label">Diversity Change:</span>
                            <span class="info-value">${formatChange(properties.change_metrics.diversity_change_percent, false)}</span>
                        </div>
                    `;
                }
                html += `<div style="margin-top: 12px; font-size: 11px; color: #94a3b8; font-style: italic;">Select a specific metric from the sidebar for detailed maps.</div>`;
            }
            
            infoBox.innerHTML = html;
            infoBox.classList.add('visible');
        }
        
        function hideInfo() {
            document.getElementById('info-box').classList.remove('visible');
        }
        
        function onEachFeature(feature, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight,
                click: (e) => {
                    const props = e.target.feature.properties;
                    const analysis = props.analysis;
                    
                    // Build context-aware popup based on current metric
                    let popupContent = `<div style="min-width: 200px;">`;
                    popupContent += `<div style="font-size: 14px; font-weight: 600; color: #60a5fa; margin-bottom: 8px;">${analysis.ward_name}</div>`;
                    popupContent += `<div style="font-size: 11px; color: #94a3b8; margin-bottom: 12px;">Ward No: ${analysis.ward_no}</div>`;
                    
                    // Show metric-specific information
                    if (currentMetric === 'vegetation_index' && props.metrics_2024) {
                        popupContent += `
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">Vegetation Index:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024.vegetation_index.toFixed(4)}</span>
                            </div>
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">Coverage:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024.coverage_percent.toFixed(1)}%</span>
                            </div>
                            <div>
                                <span style="color: #94a3b8; font-size: 12px;">Pixels:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024.pixel_count.toLocaleString()}</span>
                            </div>
                        `;
                    } else if (currentMetric === 'urban_density' && props.metrics_2024) {
                        popupContent += `
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">Urban Density:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024.urban_density.toFixed(4)}</span>
                            </div>
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">Spatial Heterogeneity:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024.spatial_heterogeneity.toFixed(2)}</span>
                            </div>
                            <div>
                                <span style="color: #94a3b8; font-size: 12px;">Pixels:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024.pixel_count.toLocaleString()}</span>
                            </div>
                        `;
                    } else if (currentMetric === 'feature_diversity' && props.metrics_2024) {
                        popupContent += `
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">Feature Diversity:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024.feature_diversity.toFixed(2)}</span>
                            </div>
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">Change Intensity:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024.change_intensity.toFixed(4)}</span>
                            </div>
                            <div>
                                <span style="color: #94a3b8; font-size: 12px;">Pixels:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024.pixel_count.toLocaleString()}</span>
                            </div>
                        `;
                    } else if (currentMetric === 'vegetation_change_percent' && props.change_metrics) {
                        popupContent += `
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">Vegetation Change:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.change_metrics.vegetation_change_percent >= 0 ? '+' : ''}${props.change_metrics.vegetation_change_percent.toFixed(2)}%</span>
                            </div>
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">2019 Value:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2019?.vegetation_index.toFixed(4) || 'N/A'}</span>
                            </div>
                            <div>
                                <span style="color: #94a3b8; font-size: 12px;">2024 Value:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024?.vegetation_index.toFixed(4) || 'N/A'}</span>
                            </div>
                        `;
                    } else if (currentMetric === 'urban_density_change_percent' && props.change_metrics) {
                        popupContent += `
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">Urban Density Change:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.change_metrics.urban_density_change_percent >= 0 ? '+' : ''}${props.change_metrics.urban_density_change_percent.toFixed(2)}%</span>
                            </div>
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">2019 Value:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2019?.urban_density.toFixed(4) || 'N/A'}</span>
                            </div>
                            <div>
                                <span style="color: #94a3b8; font-size: 12px;">2024 Value:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024?.urban_density.toFixed(4) || 'N/A'}</span>
                            </div>
                        `;
                    } else if (currentMetric === 'diversity_change_percent' && props.change_metrics) {
                        popupContent += `
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">Diversity Change:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.change_metrics.diversity_change_percent >= 0 ? '+' : ''}${props.change_metrics.diversity_change_percent.toFixed(2)}%</span>
                            </div>
                            <div style="margin-bottom: 6px;">
                                <span style="color: #94a3b8; font-size: 12px;">2019 Value:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2019?.feature_diversity.toFixed(2) || 'N/A'}</span>
                            </div>
                            <div>
                                <span style="color: #94a3b8; font-size: 12px;">2024 Value:</span>
                                <span style="color: #e2e8f0; font-weight: 600; float: right;">${props.metrics_2024?.feature_diversity.toFixed(2) || 'N/A'}</span>
                            </div>
                        `;
                    }
                    
                    popupContent += `</div>`;
                    layer.bindPopup(popupContent).openPopup();
                }
            });
        }
        
        function updateBoundaries() {
            // Boundaries are always shown, just update the ward layer style
            if (wardLayer && document.getElementById('boundaries-toggle').checked) {
                wardLayer.setStyle({
                    weight: 1,
                    opacity: 1,
                    color: '#1e293b'
                });
            } else if (wardLayer) {
                wardLayer.setStyle({
                    weight: 0,
                    opacity: 0
                });
            }
        }
        
        function updateMap() {
            if (wardLayer) {
                map.removeLayer(wardLayer);
            }
            
            wardLayer = L.geoJSON(wardsData, {
                style: styleFeature,
                onEachFeature: onEachFeature
            }).addTo(map);
            
            updateLegend();
            updateBoundaries();
        }
        
        // Metric selector
        document.querySelectorAll('.metric-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.metric-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentMetric = btn.dataset.metric;
                updateMap();
            });
        });
        
        // Layer controls
        document.getElementById('osm-toggle').addEventListener('change', (e) => {
            if (e.target.checked) {
                map.addLayer(osmLayer);
            } else {
                map.removeLayer(osmLayer);
            }
        });
        
        document.getElementById('satellite-toggle').addEventListener('change', (e) => {
            if (e.target.checked) {
                map.removeLayer(darkLayer);
                map.addLayer(satelliteLayer);
            } else {
                map.removeLayer(satelliteLayer);
                map.addLayer(darkLayer);
            }
        });
        
        document.getElementById('boundaries-toggle').addEventListener('change', updateBoundaries);
        
        document.getElementById('opacity-slider').addEventListener('input', (e) => {
            currentOpacity = e.target.value / 100;
            if (wardLayer) {
                wardLayer.setStyle({fillOpacity: currentOpacity});
            }
        });
        
        // Initial render
        updateMap();
    </script>
</body>
</html>